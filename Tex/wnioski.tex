\section{Wnioski}
\label{sec:wnioski}

Podczas realizacji niniejszej pracy napotkano na szereg trudności. Punktem przełomowym wydaje się być poprawne rozwiązanie równań sprzężonych. Bardzo pomocny na tym etapie okazał się przybornik \textit{Symbolic Math Toolbox} (pakiet \textit{MATLAB}).

Dużo do myślenia pozostawiła implementacja użytych metod numerycznych. W wyniki skracania długości kroku algorytmu RK4 rezultaty coraz bardziej zbiegały do wzorcowych, zwróconych przez wbudowany solver, \textit{ode45}. W pewnym momencie różnica ta przestała maleć. Co więcej, czas wykonania programu wzrastał niewspółmiernie do otrzymanej poprawy. Dla dynamiki Segwaya wystarczający krok to 0.001 (\ref{fig:wychylenie_1khz}).

Bardzo istotnym jeśli chodzi o czas wykonania programu okazał się być dobór początkowego kroku poszukiwania na kierunku oraz współczynników  ekspansji i kontrakcji. Wytłumaczeniem tego zjawiska może być ogromna ilość wywołań przywołanych procedur w trakcie całego algorytmu wyliczającego sterowanie optymalne. Dla większości eksperymentów korzystano z parametrów: $StepZeroLength = 1$, $WspEksp = 3$, $WspKontr = 0.5$. Należy zwrócić uwagę na wielkości jakie przyjmuje zmienna decyzyjna, a także uważnie obserwować wpływ dokonywanych zmian.

Przeprowadzając dużą liczbę różnych eksperymentów zauważono wpływ wybory sterowania początkowego na efektywność działania algorytmu. Wygodnym pomysłem, który zapobiegał przed "utknięciem" programu, było losowanie rozwiązania początkowego w każdym przedziale strukturalnym z osobna.

W przypadku omówionych w rozdziale \ref{sec:eksperymenty_numeryczne}. eksperymentów przyjęto wskaźnik jakości, który uwzględniał odchyłki wszystkich naturalnych zmiennych stanu od zera z równymi wagami. Przyglądając się zakresom wartości jakie każdy stan przyjmuje można dojść do wniosku, że przy dużej początkowej odległości (znacznie większej od 1) Segway'a od zera, stan ten staje się dominujący we wskaźniku jakości. Priorytetem systemu staje się zniwelowanie odległości tracąc na jakości sterowania pozostałymi stanami. Patrząc z inżynierskiego punktu widzenia, przy badaniu sterowania optymalnego na dłuższym horyzoncie czasowym (dla większej początkowej odchyłki położenia) należałoby wprowadzić wagi dla poszczególnych stanów we wskaźniku jakości. Taki zabieg znacząco poprawiłby jakość oraz komfort podróży pojazdem.
\paragraph*{}
Reasumując, realizacja niniejszej pracy składała się z poszczególnych etapów, wśród których można wymienić:
\begin{itemize}
\item Wstępną analizę literatury dotyczącej problematyki sterowania Segway'em
\item Zapis oraz implementacja modelu matematycznego
\item Implementację metody RK4 do rozwiązywania równań stanu oraz równań sprzężonych
\item Sformułowanie zasady maksimum dla badanego problemu
\item Wyprowadzenie równań sprzężonych
\item Uzupełnienie algorytmu wyliczającego przebieg stanu oraz równania sprzężone o wyliczanie gradientów
\item Implementację algorytmów poszukiwania na kierunku: ekspansji oraz kontrakcji
\item Implementację algorytmu BFGS
\item Analizę otrzymanych wyników
\end{itemize}




